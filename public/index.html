<html>
  <head>
    <title>Pet feeder</title>
    <link rel="shortcut icon", href="/media/petfeeder-180.png", sizes="180x180" />
    <link rel="shortcut icon", href="/media/petfeeder.png", sizes="32x32" />
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"/>
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap@latest/dist/css/bootstrap.css"/>
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
  </head>
  <body>
    <div class="container-fluid">
      <div class="page-header alert alert-dark text-center">
        <h1>Pet feeder</h1>
      </div>

      <span id="vuewrapper" v-cloak>
        <div class="row" id="buttons">

          <div class="col-md-6">
            <a class="btn btn-success" role="button" onclick="vm.refreshData()" style="margin-left:5px">
              <div class="fa fa-sync" style="padding: 3.5px"></div>
            </a>
          </div>
          <div class="col-md-6 col-md-offset-4">
            <a class="btn btn-lg btn-success float-right" role="button" onclick="vm.feed()">Feed now</a>
          </div>
        </div>
        <div class="row" id="schedules">
          <div class="col-md-12">
            <div v-for="type in eventsByType" class="row">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col">{{ type[0].type }}s</th>
                    <th scope="col">Time</th>
                    <th v-if="type[0].type == 'Meal'" scope="col">Servings</th>
                    <th v-if="type[0].type == 'HealthCheck'" scope="col">Check ID</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="event in type">
                    <td>{{ event.details.name }}</td>
                    <td>{{ event.details.time }}</td>
                    <td v-if="type[0].type == 'Meal'" scope="col">{{ event.details.servings }}</td>
                    <td v-if="type[0].type == 'HealthCheck'" scope="col">{{ event.details.check_id }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </span>
        <b-modal ref="errorModal" title="Error encountered">
          <p>{{ errorMessage }}</p>
        </b-modal>
      </div>
    </div>

    <script src="//cdn.jsdelivr.net/npm/vue"></script>
    <script src="//unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script src="//unpkg.com/axios/dist/axios.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/idb-keyval@3/dist/idb-keyval-iife.min.js"></script>
    <script src='js/app.js'></script>
  </body>
</html>
